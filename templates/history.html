{% extends "layout.html" %}

{% block title %}
    History
{% endblock %}

<header>
    {% block div1 %}
        class="nav-link"
    {% endblock %}

    {% block div2 %}
        class="nav-link"
    {% endblock %}

    {% block div3 %}
        class="nav-link button letter" aria-current="page"
    {% endblock %}

    {% block div4 %}
        class="nav-link"
    {% endblock %}

    {% block div5 %}
        class="nav-link"
    {% endblock %}
</header>

{% block main %}

<div class="container py-5">

    <h1 class="fw-bold mb-4 text-center letter">
        Study Plan History
    </h1>

    <p class="text-center mb-5 letter">
        Recently generated study plans are listed below.
    </p>

    {% if plans %}
        <div class="accordion" id="historyAccordion">
            {% for plan in plans %}
            <div class="accordion-item mb-3">
                <h2 class="accordion-header">
                    <button
                        class="accordion-button collapsed"
                        type="button"
                        data-bs-toggle="collapse"
                        data-bs-target="#plan{{ plan.id }}"
                    >
                        Plan #{{ plan.id }} â€” {{ plan.created }} ({{ plan.free_time }})
                    </button>
                </h2>

                <div
                    id="plan{{ plan.id }}"
                    class="accordion-collapse collapse"
                    data-bs-parent="#historyAccordion"
                >
                    <div class="accordion-body">
                        <ul class="list-group">
                            {% for lesson in plan.lessons %}
                            <li class="list-group-item d-flex justify-content-between align-items-center">
                                <strong>{{ lesson.name }}</strong>
                                <span class="badge bg-primary">
                                    {{ lesson.study_time }}
                                </span>
                            </li>
                            {% endfor %}
                        </ul>
                    </div>
                </div>
            </div>
            {% endfor %}
        </div>
    {% else %}
        <p class="text-center letter">
            No study plans have been created yet.
        </p>
    {% endif %}

</div>

{% endblock %}
